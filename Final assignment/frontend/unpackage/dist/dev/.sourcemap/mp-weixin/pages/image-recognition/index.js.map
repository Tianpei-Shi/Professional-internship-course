{"version":3,"file":"index.js","sources":["pages/image-recognition/index.uvue","../../../../../Environment/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaW1hZ2UtcmVjb2duaXRpb24vaW5kZXgudXZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <!-- 标题 -->\n    <view class=\"title\">图片识别</view>\n\n    <!-- 上传图片区域 -->\n    <view class=\"upload-area\">\n      <image v-if=\"imagePreview\" :src=\"imagePreview\" class=\"uploaded-image\"></image>\n      <button @click=\"chooseImage\">上传图片</button>\n    </view>\n\n    <!-- 操作按钮 -->\n    <view class=\"button-group\">\n      <button @click=\"recognizeImage\" :disabled=\"!imageFile\">识别图片</button>\n      <button @click=\"clearImage\" :disabled=\"!imageFile\">清空</button>\n      <button @click=\"viewHistory\">查看历史记录</button>\n    </view>\n\n    <!-- 识别结果 -->\n    <view v-if=\"recognizedText\" class=\"result\">\n      <text>识别结果：</text>\n      <textarea v-model=\"recognizedText\" readonly></textarea>\n    </view>\n  </view>\n</template>\n\n<script lang=\"uts\">\nexport default {\n  data() {\n    return {\n      imageFile: null, // 上传的图片文件\n      imagePreview: '', // 图片的预览地址\n      recognizedText: '' // 识别结果\n    };\n  },\n  methods: {\n    // 选择图片\n    chooseImage() {\n      uni.chooseImage({\n        count: 1,\n        sizeType: ['compressed'],\n        success: (res) => {\n          this.imageFile = res.tempFilePaths[0];\n          this.imagePreview = res.tempFilePaths[0];\n        }\n      });\n    },\n    // 调用后端接口识别图片\n    async recognizeImage() {\n      if (!this.imageFile) {\n        uni.showToast({ title: '请先上传图片', icon: 'none' });\n        return;\n      }\n      uni.showLoading({ title: '识别中...' });\n      try {\n        const res = await uni.request({\n          url: 'http://localhost:8080/image/recognize', // 后端 API 地址\n          method: 'POST',\n          filePath: this.imageFile,\n          name: 'image',\n          header: { 'Content-Type': 'multipart/form-data' },\n        });\n        this.recognizedText = res.data.result || '未识别到内容';\n      } catch (err) {\n        uni.showToast({ title: '识别失败，请重试', icon: 'none' });\n      } finally {\n        uni.hideLoading();\n      }\n    },\n    // 清空图片和结果\n    clearImage() {\n      this.imageFile = null;\n      this.imagePreview = '';\n      this.recognizedText = '';\n    },\n    // 跳转到历史记录页面\n    viewHistory() {\n      uni.navigateTo({ url: '/pages/history/index' });\n    }\n  }\n};\n</script>\n\n<style scoped>\n.container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 20px;\n}\n\n.title {\n  font-size: 24px;\n  font-weight: bold;\n  margin-bottom: 20px;\n}\n\n.upload-area {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.uploaded-image {\n  width: 200px;\n  height: 200px;\n  margin-bottom: 10px;\n}\n\n.button-group {\n  display: flex;\n  justify-content: space-around;\n  width: 100%;\n  margin-bottom: 20px;\n}\n\nbutton {\n  padding: 10px 20px;\n  font-size: 16px;\n}\n\n.result {\n  width: 100%;\n  margin-top: 20px;\n}\n\ntextarea {\n  width: 100%;\n  height: 150px;\n  margin-top: 10px;\n  padding: 10px;\n  font-size: 14px;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n  resize: none;\n}\n</style>\n","import MiniProgramPage from 'D:/JetBrains/Project/Professional-internship-course/Final assignment/frontend/pages/image-recognition/index.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","uni"],"mappings":";;AA2BA,MAAA,YAAeA,8BAAA;AAAA,EACb,OAAI;AACF,WAAO;AAAA,MACL,WAAW;AAAA,MACX,cAAc;AAAA,MACd,gBAAgB;AAAA;AAAA;EAEnB;AAAA,EACD,SAAS;AAAA;AAAA,IAEP,cAAW;AACTC,oBAAAA,MAAI,YAAY;AAAA,QACd,OAAO;AAAA,QACP,UAAU,CAAC,YAAY;AAAA,QACvB,SAAS,CAAC,QAAG;AACX,eAAK,YAAY,IAAI,cAAc,CAAC;AACpC,eAAK,eAAe,IAAI,cAAc,CAAC;AAAA,QACzC;AAAA,MACD,CAAA;AAAA,IACF;AAAA;AAAA,IAEK,iBAAc;;AAClB,YAAI,CAAC,KAAK,WAAW;AACnBA,wBAAG,MAAC,UAAU,EAAE,OAAO,UAAU,MAAM,OAAK,CAAG;AAC/C,iBAAM,QAAA,QAAA,IAAA;AAAA,QACR;AACAA,sBAAAA,MAAI,YAAY,EAAE,OAAO,SAAU,CAAA;AACnC,YAAI;AACF,gBAAM,MAAM,MAAMA,cAAG,MAAC,QAAQ;AAAA,YAC5B,KAAK;AAAA,YACL,QAAQ;AAAA,YACR,UAAU,KAAK;AAAA,YACf,MAAM;AAAA,YACN,0BAAQ,EAAE,gBAAgB,uBAAuB;AAAA,UAClD,CAAA;AACD,eAAK,iBAAiB,IAAI,KAAK,UAAU;AAAA,QACzC,SAAO,KAAK;AACZA,wBAAG,MAAC,UAAU,EAAE,OAAO,YAAY,MAAM,OAAK,CAAG;AAAA,QACnD,UAAU;AACRA,wBAAG,MAAC,YAAW;AAAA,QACjB;AAAA,OACD;AAAA,IAAA;AAAA;AAAA,IAED,aAAU;AACR,WAAK,YAAY;AACjB,WAAK,eAAe;AACpB,WAAK,iBAAiB;AAAA,IACvB;AAAA;AAAA,IAED,cAAW;AACTA,oBAAAA,MAAI,WAAW,EAAE,KAAK,uBAAwB,CAAA;AAAA,IAChD;AAAA,EACF;CACD;;;;;;;;;;;;;;;;;;;;;;AC/ED,GAAG,WAAW,eAAe;"}