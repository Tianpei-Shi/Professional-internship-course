{"code":"import { __awaiter } from \"tslib\";\nimport { defineComponent } from \"vue\";\nexport default defineComponent({\n    data() {\n        return {\n            imageFile: null,\n            imagePreview: '',\n            recognizedText: '' // 识别结果\n        };\n    },\n    methods: {\n        // 选择图片\n        chooseImage() {\n            uni.chooseImage({\n                count: 1,\n                sizeType: ['compressed'],\n                success: (res) => {\n                    this.imageFile = res.tempFilePaths[0];\n                    this.imagePreview = res.tempFilePaths[0];\n                }\n            });\n        },\n        // 调用后端接口识别图片\n        recognizeImage() {\n            return __awaiter(this, void 0, void 0, function* () {\n                if (!this.imageFile) {\n                    uni.showToast({ title: '请先上传图片', icon: 'none' });\n                    return Promise.resolve(null);\n                }\n                uni.showLoading({ title: '识别中...' });\n                try {\n                    const res = yield uni.request({\n                        url: 'http://localhost:8080/image/recognize',\n                        method: 'POST',\n                        filePath: this.imageFile,\n                        name: 'image',\n                        header: new UTSJSONObject({ 'Content-Type': 'multipart/form-data' }),\n                    });\n                    this.recognizedText = res.data.result || '未识别到内容';\n                }\n                catch (err) {\n                    uni.showToast({ title: '识别失败，请重试', icon: 'none' });\n                }\n                finally {\n                    uni.hideLoading();\n                }\n            });\n        },\n        // 清空图片和结果\n        clearImage() {\n            this.imageFile = null;\n            this.imagePreview = '';\n            this.recognizedText = '';\n        },\n        // 跳转到历史记录页面\n        viewHistory() {\n            uni.navigateTo({ url: '/pages/history/index' });\n        }\n    }\n});\n//# sourceMappingURL=D:/JetBrains/Project/Professional-internship-course/To_Last_class_work/SDWeb/uni-app/Smart%20Micro/pages/image-recognition/index.uvue?vue&type=script&lang.uts.js.map","references":[],"uniExtApis":["uni.chooseImage","uni.showToast","uni.showLoading","uni.request","uni.hideLoading","uni.navigateTo"],"map":"{\"version\":3,\"file\":\"index.uvue?vue&type=script&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"index.uvue?vue&type=script&lang.uts\"],\"names\":[],\"mappings\":\";;AACA,+BAAe;IACb,IAAI;QACF,OAAO;YACL,SAAS,EAAE,IAAI;YACf,YAAY,EAAE,EAAE;YAChB,cAAc,EAAE,EAAE,CAAC,OAAO;SAC3B,CAAC;IACJ,CAAC;IACD,OAAO,EAAE;QACP,OAAO;QACP,WAAW;YACT,GAAG,CAAC,WAAW,CAAC;gBACd,KAAK,EAAE,CAAC;gBACR,QAAQ,EAAE,CAAC,YAAY,CAAC;gBACxB,OAAO,EAAE,CAAC,GAAG;oBACX,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;oBACtC,IAAI,CAAC,YAAY,GAAG,GAAG,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;gBAC3C,CAAC;aACF,CAAC,CAAC;QACL,CAAC;QACD,aAAa;QACP,cAAc;;gBAClB,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;oBACnB,GAAG,CAAC,SAAS,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC;oBACjD,6BAAO;iBACR;gBACD,GAAG,CAAC,WAAW,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAE,CAAC,CAAC;gBACrC,IAAI;oBACF,MAAM,GAAG,GAAG,MAAM,GAAG,CAAC,OAAO,CAAC;wBAC5B,GAAG,EAAE,uCAAuC;wBAC5C,MAAM,EAAE,MAAM;wBACd,QAAQ,EAAE,IAAI,CAAC,SAAS;wBACxB,IAAI,EAAE,OAAO;wBACb,MAAM,oBAAE,EAAE,cAAc,EAAE,qBAAqB,EAAE,CAAA;qBAClD,CAAC,CAAC;oBACH,IAAI,CAAC,cAAc,GAAG,GAAG,CAAC,IAAI,CAAC,MAAM,IAAI,QAAQ,CAAC;iBACnD;gBAAC,OAAO,GAAG,EAAE;oBACZ,GAAG,CAAC,SAAS,CAAC,EAAE,KAAK,EAAE,UAAU,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC;iBACpD;wBAAS;oBACR,GAAG,CAAC,WAAW,EAAE,CAAC;iBACnB;YACH,CAAC;SAAA;QACD,UAAU;QACV,UAAU;YACR,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACtB,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;YACvB,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;QAC3B,CAAC;QACD,YAAY;QACZ,WAAW;YACT,GAAG,CAAC,UAAU,CAAC,EAAE,GAAG,EAAE,sBAAsB,EAAE,CAAC,CAAC;QAClD,CAAC;KACF;CACF,EAAC\"}"}
