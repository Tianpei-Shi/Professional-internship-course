{"code":"import { __awaiter } from \"tslib\";\nimport { defineComponent } from \"vue\";\nexport default defineComponent({\n    data() {\n        return {\n            userInput: '',\n            chatMessages: [\n                new UTSJSONObject({ text: '你好！有什么我可以帮助你的吗？', type: 'ai' }),\n            ] // 聊天记录\n        };\n    },\n    methods: {\n        sendMessage() {\n            return __awaiter(this, void 0, void 0, function* () {\n                if (!this.userInput.trim()) {\n                    uni.showToast({ title: '请输入内容', icon: 'none' });\n                    return Promise.resolve(null);\n                }\n                // 添加用户消息到聊天记录\n                this.chatMessages.push({ text: this.userInput, type: 'user' });\n                const currentInput = this.userInput; // 保存用户输入内容\n                this.userInput = ''; // 清空输入框\n                // 显示加载提示\n                uni.showLoading({ title: 'AI处理中...' });\n                try {\n                    // 调用后端 API\n                    const res = yield uni.request({\n                        url: 'http://localhost:8080/chat',\n                        method: 'POST',\n                        data: new UTSJSONObject({ userInput: currentInput }),\n                        header: new UTSJSONObject({ 'Content-Type': 'application/json' }),\n                    });\n                    // 获取 AI 返回的结果\n                    const response = res.data.response || '未返回结果';\n                    this.chatMessages.push({ text: response, type: 'ai' });\n                }\n                catch (err) {\n                    // 显示错误消息\n                    this.chatMessages.push({ text: '发送失败，请重试', type: 'error' });\n                }\n                finally {\n                    uni.hideLoading();\n                }\n            });\n        }\n    }\n});\n//# sourceMappingURL=D:/JetBrains/Project/Professional-internship-course/Final%20assignment/frontend/pages/ai-chat/index.uvue?vue&type=script&lang.uts.js.map","references":[],"uniExtApis":["uni.showToast","uni.showLoading","uni.request","uni.hideLoading"],"map":"{\"version\":3,\"file\":\"index.uvue?vue&type=script&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"index.uvue?vue&type=script&lang.uts\"],\"names\":[],\"mappings\":\";;AACA,+BAAe;IACb,IAAI;QACF,OAAO;YACL,SAAS,EAAE,EAAE;YACb,YAAY,EAAE;kCACZ,EAAE,IAAI,EAAE,iBAAiB,EAAE,IAAI,EAAE,IAAI,EAAE;aACxC,CAAC,OAAO;SACV,CAAC;IACJ,CAAC;IACD,OAAO,EAAE;QACD,WAAW;;gBACf,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,EAAE;oBAC1B,GAAG,CAAC,SAAS,CAAC,EAAE,KAAK,EAAE,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC;oBAChD,6BAAO;iBACR;gBAED,cAAc;gBACd,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC;gBAE/D,MAAM,YAAY,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,WAAW;gBAChD,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC,CAAC,QAAQ;gBAE7B,SAAS;gBACT,GAAG,CAAC,WAAW,CAAC,EAAE,KAAK,EAAE,UAAU,EAAE,CAAC,CAAC;gBAEvC,IAAI;oBACF,WAAW;oBACX,MAAM,GAAG,GAAG,MAAM,GAAG,CAAC,OAAO,CAAC;wBAC5B,GAAG,EAAE,4BAA4B;wBACjC,MAAM,EAAE,MAAM;wBACd,IAAI,oBAAE,EAAE,SAAS,EAAE,YAAY,EAAE,CAAA;wBACjC,MAAM,oBAAE,EAAE,cAAc,EAAE,kBAAkB,EAAE,CAAA;qBAC/C,CAAC,CAAC;oBAEH,cAAc;oBACd,MAAM,QAAQ,GAAG,GAAG,CAAC,IAAI,CAAC,QAAQ,IAAI,OAAO,CAAC;oBAC9C,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;iBACxD;gBAAC,OAAO,GAAG,EAAE;oBACZ,SAAS;oBACT,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,UAAU,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,CAAC;iBAC7D;wBAAS;oBACR,GAAG,CAAC,WAAW,EAAE,CAAC;iBACnB;YACH,CAAC;SAAA;KACF;CACF,EAAC\"}"}
